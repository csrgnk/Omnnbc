<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post View - Namo Narayanaya</title>
    <style>
        body { margin:0; font-family:Arial; background:#f4f6f9; line-height: 1.6; color: #333; }
        header { background:#fff9db; padding:20px; text-align:center; font-size:1.8rem; font-weight:bold; color:#C2185B; }
        .container { max-width:800px; margin:20px auto; padding:20px; }
        .content-area { background:#fff; padding:30px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); min-height: 300px; }
        .back-link { display:inline-block; margin-bottom:20px; color:#FF9800; text-decoration:none; font-weight:bold; }
        #postContent h1 { color: #002366; margin-top: 0; }
        #postContent img { max-width: 100%; height: auto; border-radius: 8px; margin: 15px 0; }
    </style>
</head>
<body>

<header>Namo Narayanaya Bhakthi Channel</header>

<div class="container">
    <a href="index.html" class="back-link">‚Üê Back to Home</a>
    <article class="content-area" id="postContent">
        Loading spiritual wisdom...
    </article>
</div>

<script>
    const params = new URLSearchParams(window.location.search);
    const postFile = params.get('id');

    if (postFile) {
        // SMART PATH LOGIC: 
        // If the link is "posts/file.html", use it directly. 
        // If the link is just "file.html", add "posts/" in front.
        const finalPath = postFile.includes('posts/') ? `./${postFile}` : `./posts/${postFile}`;

        fetch(finalPath)
            .then(response => {
                if (!response.ok) throw new Error('File not found');
                return response.text();
            })
            .then(htmlContent => {
                document.getElementById('postContent').innerHTML = htmlContent;
                
                // Update Browser Title based on the H1 in the content
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = htmlContent;
                const titleText = tempDiv.querySelector('h1')?.innerText;
                if(titleText) document.title = titleText + " - Namo Narayanaya";
            })
            .catch(err => {
                console.error(err);
                document.getElementById('postContent').innerHTML = 
                `<h2>Content Not Found</h2><p>Sorry, we could not find the post at: <b>${finalPath}</b></p>`;
            });
    } else {
        window.location.href = "index.html";
    }
</script>
</body>
</html>
